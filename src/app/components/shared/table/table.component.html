<div class="card">
  <div class="card-header border-0">
    <div class="card-title m-0 py-2">
      <h3 class="fw-bolder mt-4">{{ tableOptions.title }}</h3>
    </div>
    <div
      class="d-flex flex-nowrap align-items-center gap-5 w-100"
      [ngClass]="
        !tableOptions.isSearch
          ? 'justify-content-end'
          : 'justify-content-between'
      "
    >
      @if(tableOptions.isSearch){
      <form class="flex-grow-1 position-relative" autoComplete="off">
        <app-keenicon
          name="magnifier"
          class="fs-2 position-absolute top-50 start-0 ms-5 translate-middle-y"
        ></app-keenicon>
        <input
          type="text"
          class="form-control form-control-solid pe-5"
          name="search"
          placeholder="{{ tableOptions.searchPlaceholder }}"
        />
      </form>
      }

      <div
        class="d-flex align-items-center gap-2"
        [ngClass]="tableOptions.isDraft ? 'justify-content-between w-100' : ''"
      >
        @if(tableOptions.isCategories || tableOptions.isRoles ||
        tableOptions.isSubCategories || tableOptions.isStatus){
        <div class="card-toolbar">
          <button
            type="button"
            class="btn btn-sm btn-icon btn-color-primary btn-active-light-primary"
            data-kt-menu-trigger="click"
            data-kt-menu-placement="bottom-end"
            data-kt-menu-flip="top-end"
          >
            <app-keenicon name="category" class="fs-2"></app-keenicon>
          </button>
          <app-dropdown-menu
            [filterOptions]="filterOptions"
            (filterOptionsEmitter)="recevieFilterOption($event)"
          ></app-dropdown-menu>
        </div>
        }
        <ng-content></ng-content>
        @if(customBtns){ @for(btn of customBtns; track btn){
        <button
          (click)="btn.click()"
          class="btn btn-sm d-flex flex-nowrap align-items-center"
          [ngClass]="'btn-' + btn.bgColor"
        >
          {{ btn.content }}
        </button>
        } }
      </div>
    </div>
  </div>
  <div class="card-body py-3">
    <div class="table-responsive">
      <table
        class="table table-row-dashed table-row-gray-300 align-middle gs-0 gy-4"
      >
        <thead>
          <tr class="fw-bolder text-muted">
            @if(tableOptions.isCheckbox){
            <th class="w-25px">
              <div
                class="form-check form-check-sm form-check-custom form-check-solid"
              >
                <input
                  class="form-check-input"
                  type="checkbox"
                  value="1"
                  data-kt-check="true"
                  data-kt-check-target=".widget-9-check"
                />
              </div>
            </th>
            } @for(col of tableOptions.headerCols; track col){
            <th [style.minWidth]="col.width">{{ col.title }}</th>
            }
          </tr>
        </thead>
        <tbody>
          @if(items&&items.length){ @for(item of items; track item; let idx =
          $index; let count = $count){
          <tr>
            @if(tableOptions.isCheckbox){
            <td>
              <div
                class="form-check form-check-sm form-check-custom form-check-solid"
              >
                <input
                  class="form-check-input widget-9-check"
                  type="checkbox"
                  value="{{ item.id }}"
                  (click)="onSelect($event)"
                />
              </div>
            </td>
            }
            <td>
              <div class="d-flex align-items-center">
                <div class="d-flex justify-content-start flex-column">
                  <a
                    href="#"
                    class="text-gray-900 fw-bolder text-hover-primary fs-6"
                  >
                    {{ item.title }}
                  </a>
                  @if(item.category){<span
                    class="text-muted fw-bold text-muted d-block fs-7"
                  >
                    {{ item.category }} </span
                  >}
                </div>
              </div>
            </td>
            @if(item.time){
            <td>
              <span href="#" class="text-gray-900 fw-bolder d-block fs-7">
                {{ convertToArabicTime(item.time) }}
              </span>
            </td>
            } @if(item.date){
            <td class="text-end">
              <div class="d-flex flex-column w-100">
                <div class="d-flex flex-stack">
                  <span class="text-gray-900 fs-7 fw-bolder">{{
                    convertToFullDate(item.date)
                  }}</span>
                </div>
              </div>
            </td>
            } @if(item.dateWithTime){
            <td class="text-end">
              <div class="d-flex flex-column w-100">
                <div class="d-flex flex-stack">
                  <span class="text-gray-900 fs-7 fw-bolder">{{
                    timeSinceInArabic(item.dateWithTime)
                  }}</span>
                </div>
              </div>
            </td>
            }
            <td>
              <div class="d-flex justify-content-end flex-shrink-0">
                @for(action of tableOptions.actions; track action){
                <button
                  (click)="action.click()"
                  class="btn btn-icon btn-bg-light btn-active-color-primary btn-sm mx-1"
                >
                  <app-keenicon
                    [name]="action.icon"
                    [title]="action.title"
                    class="fs-3"
                  ></app-keenicon>
                </button>
                }
              </div>
            </td>
          </tr>
          } }@else {
          <tr>
            <td colspan="4" class="text-center text-gray-900 fw-bolder fs-6">
              لا يوجد بيانات
            </td>
          </tr>
          }
        </tbody>
      </table>
    </div>
  </div>
</div>
